<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ ÙÙ„Ø§ÙÙ„ ÙˆØ·Ø¹Ù…ÙŠØ© Ø§Ù„Ø¨ÙŠÙƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… (CSS) --- */ 
        :root { 
            --primary: #D32F2F; 
            --secondary: #FFC107; 
            --bg: #F9FAFB; 
            --card-bg: #FFFFFF; 
            --text: #1F2937; 
            --text-light: #6B7280; 
            --green: #10B981; 
            --kurimi: #00695c; 
            --shadow-color: rgba(0,0,0,0.08); 
            --border-color: #E5E7EB; 
        } 
        body.dark-mode { 
            --bg: #111827; 
            --card-bg: #1F2937; 
            --text: #F3F4F6; 
            --text-light: #9CA3AF; 
            --shadow-color: rgba(0,0,0,0.3); 
            --border-color: #374151; 
        } 
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
        } 
        body { 
            font-family: 'Tajawal', sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding-bottom: 180px; 
            color: var(--text); 
            transition: background-color 0.3s, color 0.3s; 
        } 
        header { 
            background: var(--card-bg); 
            padding: 20px 15px; 
            text-align: center; 
            box-shadow: 0 4px 20px var(--shadow-color); 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            border-bottom: 4px solid var(--primary); 
            border-radius: 0 0 20px 20px; 
        } 
        .logo-area img { 
            width: 120px; 
            height: 120px; 
            border-radius: 50%; 
            border: 4px solid var(--secondary); 
            box-shadow: 0 8px 20px rgba(0,0,0,0.15); 
            object-fit: cover; 
            background: white; 
        } 
        h1 { 
            margin: 15px 0 5px; 
            font-size: 1.5rem; 
            color: var(--primary); 
            font-weight: 900; 
            letter-spacing: -0.5px; 
        } 
        .location-badge { 
            font-size: 0.9rem; 
            color: var(--text-light); 
            margin-bottom: 10px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 5px; 
        } 
        .status-badge { 
            padding: 6px 18px; 
            border-radius: 30px; 
            font-size: 0.9rem; 
            font-weight: bold; 
            display: inline-block; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
        } 
        .open { 
            background: #DCFCE7; 
            color: #166534; 
        } 
        .closed { 
            background: #FEE2E2; 
            color: #991B1B; 
        } 
        #theme-toggle { 
            position: absolute; 
            top: 20px; 
            left: 20px; 
            width: 45px; 
            height: 45px; 
            background: var(--bg); 
            border: 2px solid var(--border-color); 
            border-radius: 50%; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 22px; 
            color: var(--text); 
            transition: 0.3s; 
            box-shadow: 0 2px 10px var(--shadow-color); 
        } 
        .nav-scroller { 
            display: flex; 
            gap: 12px; 
            overflow-x: auto; 
            padding: 15px; 
            scrollbar-width: none; 
            background: var(--bg); 
        } 
        .nav-item { 
            background: var(--card-bg); 
            border: 1px solid var(--border-color); 
            padding: 12px 25px; 
            border-radius: 12px; 
            white-space: nowrap; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: 700; 
            color: var(--text); 
            font-size: 1rem; 
            box-shadow: 0 2px 5px var(--shadow-color); 
        } 
        .nav-item.active { 
            background: var(--primary); 
            color: white; 
            border-color: var(--primary); 
            transform: translateY(-2px); 
            box-shadow: 0 5px 15px rgba(211, 47, 47, 0.3); 
        } 
        .menu-grid { 
            padding: 10px 15px; 
            display: grid; 
            gap: 20px; 
        } 
        .menu-item { 
            background: var(--card-bg); 
            border-radius: 16px; 
            padding: 12px; 
            display: flex; 
            align-items: center; 
            box-shadow: 0 4px 15px var(--shadow-color); 
            transition: transform 0.2s; 
            border: 1px solid var(--border-color); 
        } 
        .menu-item:active { 
            transform: scale(0.98); 
        } 
        .menu-item img { 
            width: 100px; 
            height: 100px; 
            border-radius: 12px; 
            object-fit: cover; 
            margin-left: 15px; 
            background-color: #f0f0f0; 
        } 
        .item-info { 
            flex: 1; 
        } 
        .item-info h3 { 
            margin: 0 0 6px; 
            font-size: 1.1rem; 
            color: var(--text); 
            font-weight: 800; 
        } 
        .item-desc { 
            font-size: 0.8rem; 
            color: var(--text-light); 
            margin-bottom: 8px; 
            line-height: 1.4; 
        } 
        .price { 
            color: var(--primary); 
            font-weight: 900; 
            font-size: 1.2rem; 
        } 
        .controls { 
            display: flex; 
            align-items: center; 
            background: var(--bg); 
            border-radius: 25px; 
            padding: 4px; 
            border: 1px solid var(--border-color); 
        } 
        .btn-qty { 
            width: 32px; 
            height: 32px; 
            border: none; 
            background: var(--card-bg); 
            border-radius: 50%; 
            font-size: 1.2rem; 
            color: var(--primary); 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        } 
        .qty-val { 
            width: 35px; 
            text-align: center; 
            font-weight: bold; 
            color: var(--text); 
        } 
        .cart-bar { 
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 25px 25px 0 0; 
            box-shadow: 0 -10px 30px rgba(0,0,0,0.1); 
            z-index: 2000; 
            transition: background-color 0.3s; 
        } 
        .delivery-panel { 
            background: var(--bg); 
            border: 1px solid var(--border-color); 
            padding: 12px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            font-size: 0.9rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            color: var(--text); 
        } 
        .delivery-btn { 
            background: var(--text); 
            color: var(--bg); 
            border: none; 
            padding: 8px 16px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.85rem; 
            font-weight: bold; 
        } 
        .total-row { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
            font-weight: 900; 
            font-size: 1.3rem; 
            color: var(--text); 
        } 
        .action-btn { 
            width: 100%; 
            padding: 16px; 
            border: none; 
            border-radius: 16px; 
            background: #10B981; 
            color: white; 
            font-size: 1.2rem; 
            font-weight: 900; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 10px; 
            cursor: pointer; 
            transition: 0.3s; 
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4); 
        } 
        .action-btn:disabled { 
            background: #9CA3AF; 
            box-shadow: none; 
        } 
        .modal-box { 
            background: var(--card-bg); 
            padding: 25px; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 400px; 
        } 
        .input-field { 
            width: 100%; 
            padding: 12px; 
            border-radius: 10px; 
            margin-top: 5px; 
            outline: none; 
            font-size: 1rem; 
            background: var(--bg); 
            color: var(--text); 
            border: 1px solid var(--border-color); 
        } 
        .pay-opt { 
            flex: 1; 
            padding: 15px; 
            text-align: center; 
            border-radius: 12px; 
            cursor: pointer; 
            border: 2px solid var(--border-color); 
            font-weight: bold; 
            color: var(--text); 
            transition: 0.2s; 
        } 
        .pay-opt.selected { 
            border-color: var(--kurimi); 
            background: rgba(0, 105, 92, 0.05); 
            color: var(--kurimi); 
        } 
        .nav-scroller::-webkit-scrollbar { 
            display: none; 
        } 
        .nav-scroller { 
            -ms-overflow-style: none; 
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        .modal {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 3000; 
            display: none; /* ÙŠØªÙ… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù‡Ø§ Ø¨Ø§Ù„Ù€ JS */
            justify-content: center; 
            align-items: center;
        }
        /* ØªØ¹Ø¯ÙŠÙ„ CSS Ø¬Ø¯ÙŠØ¯ Ù„Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ */
        #delivery-panel {
            display: none !important; 
        }
    </style>
</head>
<body>

    <header>
        <button id="theme-toggle">â˜€ï¸</button>
        <div class="logo-area">
            <img src="https://pbs.twimg.com/media/G8PkwQaa4AEfLQk?format=jpg&name=large" alt="Ø´Ø¹Ø§Ø± ÙÙ„Ø§ÙÙ„ Ø§Ù„Ø¨ÙŠÙƒ">
        </div>
        <h1>ÙÙ„Ø§ÙÙ„ ÙˆØ·Ø¹Ù…ÙŠØ© Ø§Ù„Ø¨ÙŠÙƒ ğŸ‘‘</h1>
        <div class="location-badge">ğŸ“ ØªØ¹Ø² - Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…ØªÙˆÙØ±</div> 
        <div id="store-status" class="status-badge open">ğŸŸ¢ Ù…ÙØªÙˆØ­ - Ù†Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
    </header>

    <div class="nav-scroller">
        <button class="nav-item active" onclick="filter('all', this)">Ø§Ù„ÙƒÙ„</button>
        <button class="nav-item" onclick="filter('Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª', this)">Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª ğŸŒ¯</button>
        <button class="nav-item" onclick="filter('ÙˆØ¬Ø¨Ø§Øª', this)">ÙˆØ¬Ø¨Ø§Øª ğŸŸ</button>
        <button class="nav-item" onclick="filter('Ù…Ø´Ø±ÙˆØ¨Ø§Øª', this)">Ù…Ø´Ø±ÙˆØ¨Ø§Øª ğŸ¥¤</button>
    </div>

    <div id="menu-list" class="menu-grid"></div>

    <div class="cart-bar">
        <div class="delivery-panel" id="delivery-panel">
            <span id="delivery-text">ğŸ“ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
            <button class="delivery-btn">ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</button>
        </div>
        <div class="total-row">
            <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
            <span id="grand-total" style="color:var(--primary)">0 Ø±ÙŠØ§Ù„</span>
        </div>
        <button id="main-btn" class="action-btn" onclick="openCustomerModal()" disabled>Ø³Ù„Ø© ÙØ§Ø±ØºØ© ğŸ›’</button>
    </div>

    <div id="customer-modal" class="modal">
        <div class="modal-box">
            <h3 style="margin-top:0; color:var(--primary); text-align:center;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨ ğŸ“</h3>
            <div style="margin-bottom:15px;">
                <label style="font-weight:bold; font-size:0.9rem; color:var(--text);">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
                <div style="display:flex; gap:10px; margin-top:5px;">
                    <div class="pay-opt selected" onclick="selectPayment('ÙƒØ§Ø´', this)">
                        <span style="font-size:1.2rem;">ğŸ’µ</span><br>ÙƒØ§Ø´
                    </div>
                    <div class="pay-opt" onclick="selectPayment('Ø­Ø§Ø³Ø¨ (ÙƒØ±ÙŠÙ…ÙŠ)', this)">
                        <span style="font-size:1.2rem; color:#00695c;">ğŸ¦</span><br>Ø­Ø§Ø³Ø¨
                    </div>
                </div>
            </div>
            <div style="margin-bottom:10px;">
                <label style="font-weight:bold; font-size:0.9rem; color:var(--text);">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…:</label>
                <input type="text" id="cust-name" class="input-field" placeholder="Ø§Ù„Ø§Ø³Ù…..">
            </div>
            <div style="margin-bottom:10px;">
                <label style="font-weight:bold; font-size:0.9rem; color:var(--text);">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (ÙˆØ§ØªØ³Ø§Ø¨):</label>
                <input type="tel" id="cust-phone" class="input-field" placeholder="7xxxxxxxx" maxlength="9">
            </div>
            <div style="margin-bottom:20px;">
                <label style="font-weight:bold; font-size:0.9rem; color:var(--text);">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</label>
                <input type="text" id="cust-notes" class="input-field" placeholder="Ø¨Ø¯ÙˆÙ† Ø´Ø·Ø©ØŒ ÙƒØ«Ø± Ø·Ø­ÙŠÙ†Ø©...">
            </div>
            <button class="action-btn" onclick="sendToWhatsapp()">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ ğŸš€</button>
            <button onclick="document.getElementById('customer-modal').style.display='none'" style="width:100%; padding:10px; margin-top:10px; background:transparent; border:none; color:var(--text-light); font-weight:bold; cursor:pointer;">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>


    <script>
        // ==========================================
        // ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… (Ù…Ø­Ø¯Ø«Ø© Ø¨Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø«Ù…Ø§Ù†ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
        // ==========================================
        const menu = [
            // --- Ø§Ù„Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª (100 Ø±ÙŠØ§Ù„ Ùˆ 150 Ø±ÙŠØ§Ù„) ---
            { id: 1, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„ (Ø·Ø¹Ù…ÙŠØ©)", 
              price: 100, cat: "Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª", desc: "Ø·Ø¹Ù…ÙŠØ© Ù…Ù‚Ø±Ù…Ø´Ø© Ù…Ø¹ Ø³Ù„Ø·Ø© Ù…Ù…ÙŠØ²Ø©", 
              img: "https://pbs.twimg.com/media/G8PkXGja4AIRMH_?format=jpg&name=medium" },
            { id: 2, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ¶", 
              price: 150, cat: "Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª", desc: "ÙÙ„Ø§ÙÙ„ Ù…Ù…ÙŠØ²Ø© Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ¶ Ø§Ù„Ù…Ø³Ù„ÙˆÙ‚", 
              img: "https://pbs.twimg.com/media/G8PkiqKa4AIw8Ad?format=jpg&name=medium" },
              
            // --- Ø§Ù„ÙˆØ¬Ø¨Ø§Øª (500 Ø±ÙŠØ§Ù„ Ùˆ 400 Ø±ÙŠØ§Ù„) ---
            { id: 3, name: "ÙˆØ¬Ø¨Ø© Ù…Ø§ÙƒØ³ Ø§Ù„Ù…Ù„ÙƒÙŠ (ÙÙ„Ø§ÙÙ„ ÙˆØ¨Ø·Ø§Ø·Ø³)", 
              price: 500, cat: "ÙˆØ¬Ø¨Ø§Øª", desc: "ØªØ´ÙƒÙŠÙ„Ø© Ù…Ø´Ø¨Ø¹Ø© Ù…Ù† Ø§Ù„ÙÙ„Ø§ÙÙ„ ÙˆØ§Ù„Ø¨Ø·Ø§Ø·Ø³", 
              img: "https://pbs.twimg.com/media/G8TMcuFa4AMZI9N?format=jpg&name=small" },
            { id: 4, name: "ØµØ­Ù† Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ø±Ù…Ø´Ø©", 
              price: 400, cat: "ÙˆØ¬Ø¨Ø§Øª", desc: "Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ© Ø°Ù‡Ø¨ÙŠØ© ÙˆÙ…Ù‚Ø±Ù…Ø´Ø©", 
              img: "https://pbs.twimg.com/media/G8PksWOboAAYpjH?format=jpg&name=small" },
              
            // --- Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª (200 Ø±ÙŠØ§Ù„ØŒ 100 Ø±ÙŠØ§Ù„ØŒ 200 Ø±ÙŠØ§Ù„) ---
            { id: 5, name: "Ù…Ø´Ø±ÙˆØ¨ Ø³ÙÙ† Ø£Ø¨ (ÙˆØ³Ø·)", 
              price: 200, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", desc: "Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ Ù…Ù†Ø¹Ø´ (Ø­Ø¬Ù… ÙˆØ³Ø·)", 
              img: "https://pbs.twimg.com/media/G8TLNMCbwAAZqH1?format=jpg&name=medium" },
            { id: 6, name: "Ù…Ø´Ø±ÙˆØ¨ Ù‚ÙˆØ© Ø£Ø³Ø¯ (100 Ø±ÙŠØ§Ù„)", 
              price: 100, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", desc: "Ù…Ø´Ø±ÙˆØ¨ Ø·Ø§Ù‚Ø© (Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ØµØºÙŠØ±)", 
              img: "https://pbs.twimg.com/media/G8TMTB1a4AQBEr0?format=jpg&name=medium" },
            { id: 7, name: "Ù…Ø´Ø±ÙˆØ¨ Ù‚ÙˆØ© Ø£Ø³Ø¯ (200 Ø±ÙŠØ§Ù„)", 
              price: 200, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", desc: "Ù…Ø´Ø±ÙˆØ¨ Ø·Ø§Ù‚Ø© (Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒØ¨ÙŠØ±/Ø§Ù„Ù…Ø«Ù„Ø¬)", 
              img: "https://pbs.twimg.com/media/G8S2ocOaYAE___8?format=jpg&name=900x900" }, 
        ];

        // ==========================================
        // âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        // ==========================================
        // ğŸ¯ ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª (STORE_LAT, STORE_LNG) Ù„Ø£Ù†Ù†Ø§ Ù„Ù† Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§
        const WHATSAPP_NUMBER = "967733971941";
        
        let cart = {};
        let deliveryCost = 0; // Ø³ØªØ¨Ù‚Ù‰ 0 Ø¯Ø§Ø¦Ù…Ø§Ù‹
        let userLocation = null;
        let selectedPayment = 'ÙƒØ§Ø´';

        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').textContent = 'ğŸŒ™';
            } else {
                document.getElementById('theme-toggle').textContent = 'â˜€ï¸';
            }
        }

        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            document.getElementById('theme-toggle').textContent = isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸';
        });

        function checkStoreStatus() {
            const hour = new Date().getHours();
            const statusDiv = document.getElementById('store-status');
            const mainBtn = document.getElementById('main-btn');
            if (hour >= 2 && hour < 7) {
                statusDiv.className = 'status-badge closed';
                statusDiv.innerHTML = 'ğŸ”´ Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹ (Ù†Ø¹ÙˆØ¯ 7 ØµØ¨Ø§Ø­Ø§Ù‹)';
                mainBtn.disabled = true;
                mainBtn.innerText = "Ø§Ù„Ù…Ø·Ø¹Ù… Ù…ØºÙ„Ù‚ ğŸ”’";
                mainBtn.onclick = null;
            } else {
                statusDiv.className = 'status-badge open';
                statusDiv.innerHTML = 'ğŸŸ¢ Ù…ÙØªÙˆØ­ - Ù†Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª';
                mainBtn.onclick = openCustomerModal;
            }
        }

        function loadCart() {
            const saved = localStorage.getItem('bik_cart');
            if (saved) {
                cart = JSON.parse(saved);
                updateTotal();
            }
        }

        function renderMenu(category = 'all') {
            const container = document.getElementById('menu-list');
            container.innerHTML = '';
            const fallbackImg = "https://cdn-icons-png.flaticon.com/512/706/706164.png";
            menu.forEach(item => {
                if (category === 'all' || item.cat === category) {
                    const qty = cart[item.id] || 0;
                    container.innerHTML += `
                        <div class="menu-item">
                            <img src="${item.img}" onerror="this.src='${fallbackImg}'" onclick="updateQty(${item.id}, 1)">
                            <div class="item-info">
                                <h3>${item.name}</h3>
                                <div class="item-desc">${item.desc || ''}</div>
                                <div class="price">${item.price} Ø±ÙŠØ§Ù„</div>
                            </div>
                            <div class="controls">
                                <button class="btn-qty" onclick="updateQty(${item.id}, -1)">-</button>
                                <span class="qty-val">${qty}</span>
                                <button class="btn-qty" onclick="updateQty(${item.id}, 1)">+</button>
                            </div>
                        </div>`;
                }
            });
        }
        
        window.filter = (category, elem) => {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            elem.classList.add('active');
            renderMenu(category);
        };

        window.updateQty = (id, change) => {
            if(navigator.vibrate) navigator.vibrate(40);
            if (!cart[id]) cart[id] = 0;
            cart[id] += change;
            if (cart[id] <= 0) delete cart[id];
            localStorage.setItem('bik_cart', JSON.stringify(cart));
            const activeElem = document.querySelector('.nav-item.active');
            const currentCat = activeElem ? activeElem.innerText.split(' ')[0] : 'Ø§Ù„ÙƒÙ„';
            renderMenu(currentCat === 'Ø§Ù„ÙƒÙ„' ? 'all' : currentCat);
            updateTotal();
        };

        // ğŸ¯ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¯Ø§Ù„Ø© getDistance Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ø£Ù†Ù‡Ø§ Ù„Ù… ØªØ¹Ø¯ Ø¶Ø±ÙˆØ±ÙŠØ©.

        // ğŸ¯ ØªÙ… Ø¥ÙØ±Ø§Øº Ø¯Ø§Ù„Ø© calculateDelivery Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø­Ø¯ÙˆØ« Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ© Ø­Ø³Ø§Ø¨ÙŠØ© Ù„Ù„ØªÙˆØµÙŠÙ„
        window.calculateDelivery = () => {
             alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¹Ù†Ø¯ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.");
        };

        function updateTotal() {
            let foodTotal = 0;
            let count = 0;
            menu.forEach(item => {
                if(cart[item.id]) {
                    foodTotal += cart[item.id] * item.price;
                    count += cart[item.id];
                }
            });

            // ğŸ¯ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‡Ùˆ Ø³Ø¹Ø± Ø§Ù„Ø·Ø¹Ø§Ù… ÙÙ‚Ø· (deliveryCost = 0)
            const grandTotal = foodTotal; 
            document.getElementById('grand-total').innerText = `${grandTotal.toLocaleString()} Ø±ÙŠØ§Ù„`;

            const btn = document.getElementById('main-btn');
            if(count > 0) {
                btn.disabled = false;
                btn.innerHTML = `Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ (${grandTotal.toLocaleString()} Ø±ÙŠØ§Ù„ + ØªÙˆØµÙŠÙ„)`; // ğŸ¯ ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ
            } else {
                btn.disabled = true;
                btn.innerHTML = `Ø³Ù„Ø© ÙØ§Ø±ØºØ© ğŸ›’`;
            }
        }

        window.selectPayment = (type, elem) => {
            selectedPayment = type;
            document.querySelectorAll('.pay-opt').forEach(el => el.classList.remove('selected'));
            elem.classList.add('selected');
        }

        window.openCustomerModal = () => {
            const hour = new Date().getHours();
            if (hour >= 2 && hour < 7) return alert("Ø§Ù„Ù…Ø·Ø¹Ù… Ù…ØºÙ„Ù‚ Ø§Ù„Ø¢Ù†");

            // ğŸ¯ ØªÙ… ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù…Ù†Ø·Ù‚ Ù„ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„
            document.getElementById('customer-modal').style.display = 'flex';
        };

        window.sendToWhatsapp = () => {
            const name = document.getElementById('cust-name').value;
            const phone = document.getElementById('cust-phone').value;
            const notes = document.getElementById('cust-notes').value;
            let locationInput = '';

            if(!name) return alert("Ù„Ø·ÙØ§Ù‹ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");
            if(!phone || phone.length < 9) return alert("Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ù…Ø·Ù„ÙˆØ¨");

            let msg = `*ğŸ‘‹ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - ÙÙ„Ø§ÙÙ„ ÙˆØ·Ø¹Ù…ÙŠØ© Ø§Ù„Ø¨ÙŠÙƒ*\n`;
            msg += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}\nğŸ“± *Ø§Ù„Ø¬ÙˆØ§Ù„:* ${phone}\n`;
            msg += `ğŸ’³ *Ø§Ù„Ø¯ÙØ¹:* ${selectedPayment}\n`;
            
            // ğŸ¯ Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù…Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            if (navigator.geolocation) {
                if (confirm("Ù‡Ù„ ØªØ³Ù…Ø­ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ù…ÙˆÙ‚Ø¹Ùƒ Ù„ØªØ³Ù‡ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙˆØµÙŠÙ„ØŸ")) {
                    navigator.geolocation.getCurrentPosition(
                        (pos) => {
                            locationInput = `https://www.google.com/maps/search/?api=1&query=${pos.coords.latitude},${pos.coords.longitude}\n`;
                            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø¥Ø°Ø§ ÙˆØ§ÙÙ‚)
                            buildAndSendMsg(msg, locationInput, name, phone, notes);
                        },
                        (err) => {
                            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø­ØªÙ‰ Ù„Ùˆ Ø±ÙØ¶ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹
                            alert("Ù„Ù… ÙŠØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ ØªØ²ÙˆÙŠØ¯Ù†Ø§ Ø¨Ù‡ ÙÙŠ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.");
                            buildAndSendMsg(msg, "", name, phone, notes);
                        },
                        { enableHighAccuracy: true }
                    );
                } else {
                    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ø°Ø§ Ø±ÙØ¶ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
                    buildAndSendMsg(msg, "", name, phone, notes);
                }
            } else {
                 // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
                buildAndSendMsg(msg, "", name, phone, notes);
            }
        };
        
        // ğŸ¯ Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…ÙˆÙ‚Ø¹ØŒ Ø¹Ø¯Ù… Ù…ÙˆÙ‚Ø¹)
        function buildAndSendMsg(baseMsg, locationLink, name, phone, notes) {
            let msg = baseMsg;
            msg += `------------------------\n`;

            let total = 0;
            menu.forEach(item => {
                if(cart[item.id] > 0) {
                    msg += `â–ªï¸ ${cart[item.id]}x ${item.name} (${(item.price * cart[item.id]).toLocaleString()} Ø±ÙŠØ§Ù„)\n`; 
                    total += cart[item.id] * item.price;
                }
            });
            
            msg += `------------------------\n`;
            msg += `ğŸ¥˜ Ø§Ù„Ø·Ø¹Ø§Ù…: ${total.toLocaleString()} Ø±ÙŠØ§Ù„\n`;
            // ğŸ¯ ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ ÙƒÙ€ (ÙŠØ­Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹)
            msg += `ğŸ›µ Ø§Ù„ØªÙˆØµÙŠÙ„: (ÙŠØ­Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹)\n`; 
            msg += `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Ø§Ù„Ø·Ø¹Ø§Ù… ÙÙ‚Ø·):* ${total.toLocaleString()} Ø±ÙŠØ§Ù„\n`;

            if(notes) msg += `ğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${notes}\n`;
            if(locationLink) msg += `ğŸ“ *Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø²Ø¨ÙˆÙ†:* ${locationLink}`;

            localStorage.removeItem('bik_cart');
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
            location.reload();
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        initializeTheme();
        checkStoreStatus();
        loadCart();
        renderMenu(); // Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    </script>
</body>
</html>
