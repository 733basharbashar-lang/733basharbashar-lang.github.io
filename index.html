<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠÙƒ Ø§Ù„ÙØ§Ø¦Ù‚ | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #db2777; --bg: #fdf2f8; --card-bg: #FFFFFF; --text: #831843; --border: #fbcfe8; }
        
        body.theme-blue { --primary: #2563eb; --bg: #f0f4ff; --text: #1e3a8a; }
        body.theme-pink { --primary: #db2777; --bg: #fdf2f8; --text: #831843; }
        body.theme-black { --primary: #fbbf24; --bg: #0f172a; --card-bg: #1e293b; --text: #f8fafc; --border: #334155; }

        * { box-sizing: border-box; transition: 0.2s ease-in-out; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; color: var(--text); padding-bottom: 160px; }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø±ØªØ¬Ø§Ù Ø§Ù„Ù‚ÙˆÙŠ */
        @keyframes strongShake {
            0% { transform: translate(2px, 1px) rotate(0deg); }
            20% { transform: translate(-3px, -2px) rotate(-1deg); }
            40% { transform: translate(-3px, 2px) rotate(1deg); }
            60% { transform: translate(3px, 1px) rotate(0deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            100% { transform: translate(2px, -2px) rotate(-1deg); }
        }
        .shake-active { animation: strongShake 0.4s cubic-bezier(.36,.07,.19,.97) both; }

        header { background: var(--card-bg); padding: 40px 20px; text-align: center; border-bottom: 8px solid var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .logo-area img { width: 130px; height: 130px; border-radius: 50%; border: 5px solid var(--primary); box-shadow: 0 0 20px var(--primary); }

        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; padding: 25px; max-width: 1200px; margin: 0 auto; }
        .menu-item { background: var(--card-bg); border-radius: 30px; overflow: hidden; border: 2px solid var(--border); box-shadow: 0 15px 35px rgba(0,0,0,0.05); position: relative; }
        .menu-item img { width: 100%; height: 240px; object-fit: cover; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙƒØ¨ÙŠØ±Ø© ÙˆÙˆØ§Ø¶Ø­Ø© */
        .controls { display: flex; align-items: center; justify-content: space-around; background: var(--bg); border-radius: 20px; padding: 12px; margin: 15px; }
        .btn-qty { width: 50px; height: 50px; border: none; background: var(--primary); color: white; border-radius: 15px; cursor: pointer; font-size: 1.8rem; font-weight: 900; }
        
        /* ØªÙƒØ¨ÙŠØ± Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø±Ø¨Ø© Ù„ÙŠÙƒÙˆÙ† Ø¶Ø®Ù…Ø§Ù‹ ÙˆÙ…Ù„Ø­ÙˆØ¸Ø§Ù‹ */
        .cart-bar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); width: 94%; max-width: 700px; background: var(--card-bg); padding: 25px 35px; border-radius: 35px; border: 4px solid var(--primary); box-shadow: 0 25px 60px rgba(0,0,0,0.3); z-index: 1000; display: flex; justify-content: space-between; align-items: center; }
        #grand-total { font-weight: 900; font-size: 2rem; color: var(--primary); text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        .action-btn { background: #10B981; color: white; padding: 18px 45px; border-radius: 22px; border: none; font-weight: 900; cursor: pointer; font-size: 1.4rem; box-shadow: 0 8px 20px rgba(16,185,129,0.3); }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 2000; padding: 20px; }
        .modal-box { background: var(--card-bg); padding: 40px; border-radius: 40px; width: 100%; max-width: 500px; border: 3px solid var(--primary); }
        .input-field { width: 100%; padding: 18px; margin: 15px 0; border-radius: 15px; border: 2px solid var(--border); background: var(--bg); color: var(--text); font-family: 'Tajawal'; font-size: 1.2rem; }
    </style>
</head>
<body class="theme-pink">

    <header>
        <div class="logo-area"><img src="https://pbs.twimg.com/media/G8PkwQaa4AEfLQk?format=jpg&name=large"></div>
        <h1 style="font-size: 2.2rem; margin:10px 0;">ÙÙ„Ø§ÙÙ„ Ø§Ù„Ø¨ÙŠÙƒ ğŸ‘‘</h1>
        <p style="font-size: 1.1rem; font-weight: 900;">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙØ§Ø¦Ù‚ Ù„ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
    </header>

    <div id="menu-list" class="menu-grid"></div>

    <div class="cart-bar" id="cartContainer">
        <div id="grand-total">0 Ø±ÙŠØ§Ù„</div>
        <button id="main-btn" class="action-btn" onclick="applyEffect(this); openModal()" disabled>Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>
    </div>

    <div id="orderModal" class="modal">
        <div class="modal-box">
            <h2 style="text-align:center; color: var(--primary); font-size: 2rem;">ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ ğŸ“</h2>
            <input type="text" id="cust-name" class="input-field" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
            <button onclick="applyEffect(this); getLocation()" id="location-btn" class="input-field" style="cursor:pointer; font-weight:900; color:var(--primary); background:white; border: 3px solid var(--primary);">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ (GPS)</button>
            <div id="location-status" style="text-align:center; font-size:1rem; margin-bottom:15px; font-weight: bold;"></div>
            <textarea id="cust-notes" class="input-field" rows="3" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ø£Ùˆ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>
            <button class="action-btn" style="width:100%; padding: 22px; font-size: 1.5rem;" onclick="applyEffect(this); sendToWhatsapp()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† âœ…</button>
            <button onclick="closeModal()" style="width:100%; background:none; border:none; margin-top:20px; color:gray; cursor:pointer; font-weight: 900; font-size: 1.1rem;">Ø¥Ù„ØºØ§Ø¡ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
    </div>

    <script>
        const menu = [
            { id: 1, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„", price: 100, img: "https://pbs.twimg.com/media/G8PkXGja4AIRMH_?format=jpg&name=medium" },
            { id: 2, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø¨ÙŠØ¶", price: 150, img: "https://pbs.twimg.com/media/G8PkiqKa4AIw8Ad?format=jpg&name=medium" },
            { id: 3, name: "ÙˆØ¬Ø¨Ø© Ù…Ø§ÙƒØ³ Ø§Ù„Ù…Ù„ÙƒÙŠØ©", price: 500, img: "https://pbs.twimg.com/media/G8TMcuFa4AMZI9N?format=jpg&name=small" }
        ];

        let cart = {};
        let userLoc = "";

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ø±ØªØ¬Ø§Ù ÙˆØ§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ù…Ø·ÙˆØ±Ø©
        function applyEffect(el) {
            if (navigator.vibrate) navigator.vibrate([70, 40, 70]); // Ø§Ù‡ØªØ²Ø§Ø² Ù…Ø²Ø¯ÙˆØ¬
            el.classList.add('shake-active');
            document.getElementById('cartContainer').classList.add('shake-active');
            setTimeout(() => {
                el.classList.remove('shake-active');
                document.getElementById('cartContainer').classList.remove('shake-active');
            }, 400);
        }

        function renderMenu() {
            const list = document.getElementById('menu-list');
            list.innerHTML = '';
            menu.forEach(item => {
                const qty = cart[item.id] || 0;
                list.innerHTML += `
                    <div class="menu-item">
                        <img src="${item.img}">
                        <div class="item-content">
                            <h3 style="font-size:1.4rem;">${item.name}</h3>
                            <div class="price-tag">${item.price} Ø±ÙŠØ§Ù„</div>
                            <div class="controls">
                                <button class="btn-qty" onclick="applyEffect(this); updateQty(${item.id}, -1)">-</button>
                                <span style="font-weight:900; font-size:1.8rem;">${qty}</span>
                                <button class="btn-qty" onclick="applyEffect(this); updateQty(${item.id}, 1)">+</button>
                            </div>
                        </div>
                    </div>`;
            });
        }

        window.updateQty = (id, change) => {
            cart[id] = (cart[id] || 0) + change;
            if(cart[id] <= 0) delete cart[id];
            renderMenu(); updateTotal();
        }

        function updateTotal() {
            let total = 0;
            Object.keys(cart).forEach(id => { total += menu.find(m => m.id == id).price * cart[id]; });
            document.getElementById('grand-total').innerText = total + " Ø±ÙŠØ§Ù„";
            document.getElementById('main-btn').disabled = total === 0;
        }

        window.getLocation = () => {
            const status = document.getElementById('location-status');
            status.innerHTML = "Ø¬Ø§Ø±ÙŠ ØªØªØ¨Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¯Ù‚Ø©... ğŸ“¡";
            navigator.geolocation.getCurrentPosition(
                (p) => {
                    userLoc = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                    status.innerHTML = "âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­";
                    status.style.color = "#10B981";
                },
                () => { status.innerHTML = "âŒ ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€ GPS"; status.style.color = "#ef4444"; },
                { enableHighAccuracy: true }
            );
        }

        window.openModal = () => document.getElementById('orderModal').style.display = 'flex';
        window.closeModal = () => document.getElementById('orderModal').style.display = 'none';

        window.sendToWhatsapp = () => {
            const name = document.getElementById('cust-name').value;
            if(!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…");
            
            let total = 0;
            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¶Ø®Ù…Ø© ÙˆØ§Ù„Ø£Ù†ÙŠÙ‚Ø©
            let msg = `ğŸ‘‘ *Ø·Ù€Ù„Ù€Ø¨ Ø¬Ù€Ø¯ÙŠÙ€Ø¯ Ù…Ù€Ù† Ø§Ù„Ù€Ø¨Ù€ÙŠÙ€Ùƒ* ğŸ‘‘\n`;
            msg += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;
            msg += `ğŸ‘¤ *Ø§Ù„Ø¹Ù…ÙŠÙ„:* ${name}\n\n`;
            
            if(userLoc) msg += `ğŸ“ *Ø§Ù„Ù…ÙˆÙ‚Ø¹:* ${userLoc}\n\n`;
            
            msg += `ğŸ“‹ *ØªÙ€ÙÙ€Ø§ØµÙ€ÙŠÙ€Ù„ Ø§Ù„Ù€Ø·Ù€Ù„Ù€Ø¨Ù€Ø§Øª:* \n`;
            msg += `â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n`;
            
            Object.keys(cart).forEach(id => {
                const item = menu.find(m => m.id == id);
                const sub = item.price * cart[id];
                msg += `ğŸ”¹ *${item.name}*\n`;
                msg += `      Ø§Ù„ÙƒÙ…ÙŠØ©: ( ${cart[id]} )  â†  ${sub} Ø±ÙŠØ§Ù„\n\n`;
                total += sub;
            });
            
            msg += `â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n`;
            if(document.getElementById('cust-notes').value) {
                msg += `ğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${document.getElementById('cust-notes').value}\n\n`;
            }
            msg += `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:* *${total} Ø±ÙŠØ§Ù„* ğŸ’°\n\n`;
            msg += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            msg += `âœ¨ *Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒÙ… Ø¨Ù…Ø·Ø¹Ù… Ø§Ù„Ø¨ÙŠÙƒ* âœ¨`;

            window.open(`https://wa.me/967733971941?text=${encodeURIComponent(msg)}`);
        }

        renderMenu();
    </script>
</body>
</html>
