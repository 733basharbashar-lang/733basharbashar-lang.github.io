<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙÙ„Ø§ÙÙ„ Ø§Ù„Ø¨ÙŠÙƒ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙØ§Ø¦Ù‚ V3</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #db2777; --bg: #fdf2f8; --card-bg: #FFFFFF; --text: #831843; --border: #fbcfe8; }
        * { box-sizing: border-box; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; padding-bottom: 180px; text-align: center; }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø§Ø±ØªØ¬Ø§Ù Ø§Ù„Ù…Ù„ÙƒÙŠ */
        @keyframes superShake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }
        .shake { animation: superShake 0.3s ease-in-out; }

        header { padding: 40px 15px; background: white; border-radius: 0 0 60px 60px; box-shadow: 0 15px 30px rgba(0,0,0,0.05); }
        .logo { width: 140px; height: 140px; border-radius: 50%; border: 5px solid var(--primary); padding: 5px; box-shadow: 0 0 25px var(--border); }
        
        .status-badge { display: inline-flex; align-items: center; background: #d1fae5; color: #065f46; padding: 12px 30px; border-radius: 35px; border: 2px solid #34d399; font-weight: 900; margin-top: 20px; font-size: 1.2rem; }
        .closed { background: #fee2e2; color: #991b1b; border-color: #f87171; }
        
        /* Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ */
        .slogan { color: #831843; font-weight: 900; font-size: 1.4rem; margin-top: 15px; border-bottom: 3px solid var(--primary); display: inline-block; padding-bottom: 8px; }

        .section-title { background: white; margin: 25px 20px 10px; padding: 15px; border-radius: 20px; color: var(--text); font-weight: 900; border-right: 8px solid var(--primary); text-align: right; font-size: 1.3rem; }

        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; max-width: 900px; margin: auto; }
        .product-card { background: white; border-radius: 30px; padding: 15px; border: 2px solid var(--border); box-shadow: 0 10px 25px rgba(0,0,0,0.03); }
        .product-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 25px; }
        .product-card h3 { font-weight: 900; color: var(--text); margin: 12px 0 5px; font-size: 1.1rem; }
        .product-card .price { color: var(--primary); font-weight: 900; margin-bottom: 15px; font-size: 1.2rem; }

        .qty-btns { display: flex; align-items: center; justify-content: space-between; background: #fdf2f8; border-radius: 20px; padding: 8px; }
        .q-btn { background: var(--primary); color: white; border: none; width: 45px; height: 45px; border-radius: 15px; font-size: 1.8rem; font-weight: 900; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        .footer-bar { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); width: 94%; max-width: 750px; background: white; padding: 20px 30px; border-radius: 40px; border: 4px solid var(--primary); display: flex; justify-content: space-between; align-items: center; box-shadow: 0 25px 60px rgba(0,0,0,0.3); z-index: 1000; }
        .total-amount { font-size: 2rem; font-weight: 900; color: var(--primary); }
        .confirm-btn { background: #10B981; color: white; padding: 18px 40px; border-radius: 25px; border: none; font-weight: 900; font-size: 1.4rem; cursor: pointer; }
        .confirm-btn:disabled { background: #9ca3af; cursor: not-allowed; opacity: 0.6; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.92); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .modal-box { background: white; padding: 40px; border-radius: 45px; width: 92%; max-width: 450px; border: 4px solid var(--primary); }
        .input-style { width: 100%; padding: 18px; margin: 12px 0; border-radius: 18px; border: 2px solid var(--border); font-family: inherit; font-size: 1.2rem; outline: none; }
    </style>
</head>
<body>

    <header>
        <img src="https://pbs.twimg.com/media/G8PkwQaa4AEfLQk?format=jpg&name=large" class="logo">
        <h1 style="color: var(--text); font-size: 2.5rem; margin: 5px 0;">ÙÙ„Ø§ÙÙ„ Ø§Ù„Ø¨ÙŠÙƒ ğŸ‘‘</h1>
        <div id="work-status" class="status-badge">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆØµÙŠÙ„...</div><br>
        <div class="slogan">Ø§Ù„Ø·Ø¹Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ ÙÙŠ Ù‚Ù„Ø¨ ØªØ¹Ø²</div>
    </header>

    <div class="section-title">ğŸ¥ª Ø§Ù„Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª ÙˆØ§Ù„ÙˆØ¬Ø¨Ø§Øª</div>
    <div id="food-list" class="menu-grid"></div>

    <div class="section-title">ğŸ¥¤ Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©</div>
    <div id="drink-list" class="menu-grid"></div>

    <div class="footer-bar" id="mainCart">
        <div class="total-amount" id="priceDisplay">0 Ø±ÙŠØ§Ù„</div>
        <button class="confirm-btn" id="orderBtn" onclick="openModal()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ğŸš€</button>
    </div>

    <div id="orderModal" class="modal-overlay">
        <div class="modal-box">
            <h2 style="color:var(--text); margin-bottom:20px; font-size: 1.8rem;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙˆØµÙŠÙ„ ğŸ“¦</h2>
            <input type="text" id="userName" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…..." class="input-style">
            <button onclick="getGPS()" style="width:100%; padding:18px; border-radius:18px; border:3px solid var(--primary); background:white; font-weight:900; color:var(--primary); cursor:pointer;">ğŸ“ Ù…Ø´Ø§Ø±ÙƒØ© Ù…ÙˆÙ‚Ø¹ÙŠ (Live)</button>
            <p id="gpsText" style="font-size:1rem; margin:10px 0; font-weight: bold;"></p>
            <textarea id="userNotes" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..." class="input-style" style="height:100px;"></textarea>
            <button class="confirm-btn" style="width:100%; margin-top:15px; padding:22px; font-size: 1.6rem;" onclick="submitOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ âœ…</button>
            <button onclick="closeModal()" style="background:none; border:none; margin-top:20px; color:gray; cursor:pointer; font-weight: 900;">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <script>
        const foods = [
            { id: 1, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„", price: 100, img: "https://pbs.twimg.com/media/G8PkXGja4AIRMH_?format=jpg&name=medium" },
            { id: 2, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø¨ÙŠØ¶", price: 150, img: "https://pbs.twimg.com/media/G8PkiqKa4AIw8Ad?format=jpg&name=medium" },
            { id: 3, name: "ÙˆØ¬Ø¨Ø© Ù…Ø§ÙƒØ³", price: 500, img: "https://pbs.twimg.com/media/G8TMcuFa4AMZI9N?format=jpg&name=small" },
            { id: 4, name: "ØµØ­Ù† Ø¨Ø·Ø§Ø·Ø³", price: 400, img: "https://pbs.twimg.com/media/G8PksWOboAAYpjH?format=jpg&name=small" }
        ];

        const drinks = [
            { id: 5, name: "Ø³ÙÙ† Ø£Ø¨ Ø¨Ø§Ø±Ø¯", price: 200, img: "https://images.deliveryhero.io/image/talabat/Menuitems/638115591942475487.jpg" },
            { id: 6, name: "Ù‚ÙˆØ© Ø£Ø³Ø¯ (ÙƒØ¨ÙŠØ±)", price: 200, img: "https://pbs.twimg.com/media/G8PkXGja4AIRMH_?format=jpg&name=small" },
            { id: 7, name: "Ù‚ÙˆØ© Ø£Ø³Ø¯ (ØµØºÙŠØ±)", price: 100, img: "https://via.placeholder.com/150?text=Lion+Small" }
        ];

        let cart = {};
        let gpsUrl = "";

        function checkTime() {
            const hour = new Date().getHours();
            const badge = document.getElementById('work-status');
            const btn = document.getElementById('orderBtn');
            const isOpen = (hour >= 7 && hour < 22);
            
            badge.innerHTML = isOpen ? "â— Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù† âœ…" : "â— Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…ØºÙ„Ù‚ (7Øµ - 10Ù…) âŒ";
            badge.className = isOpen ? "status-badge" : "status-badge closed";
            btn.disabled = !isOpen;
            if(!isOpen) btn.innerText = "Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹";
        }

        function render() {
            const foodDiv = document.getElementById('food-list');
            const drinkDiv = document.getElementById('drink-list');

            const itemHtml = (p) => `
                <div class="product-card">
                    <img src="${p.img}">
                    <h3>${p.name}</h3>
                    <div class="price">${p.price} Ø±ÙŠØ§Ù„</div>
                    <div class="qty-btns">
                        <button class="q-btn" onclick="modify(${p.id}, 1)">+</button>
                        <span style="font-weight:900; font-size:1.7rem">${cart[p.id] || 0}</span>
                        <button class="q-btn" onclick="modify(${p.id}, -1)">-</button>
                    </div>
                </div>`;

            foodDiv.innerHTML = foods.map(itemHtml).join('');
            drinkDiv.innerHTML = drinks.map(itemHtml).join('');
        }

        function modify(id, val) {
            cart[id] = (cart[id] || 0) + val;
            if(cart[id] <= 0) delete cart[id];
            
            const cartBar = document.getElementById('mainCart');
            cartBar.classList.add('shake');
            setTimeout(() => cartBar.classList.remove('shake'), 300);
            if(navigator.vibrate) navigator.vibrate(60);

            render();
            updateTotal();
        }

        function updateTotal() {
            let total = 0;
            [...foods, ...drinks].forEach(p => { if(cart[p.id]) total += p.price * cart[p.id]; });
            document.getElementById('priceDisplay').innerText = total + " Ø±ÙŠØ§Ù„";
        }

        function getGPS() {
            document.getElementById('gpsText').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©... ğŸ›°ï¸";
            navigator.geolocation.getCurrentPosition(pos => {
                gpsUrl = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                document.getElementById('gpsText').innerText = "âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¯Ù‚Ø©";
                document.getElementById('gpsText').style.color = "#10B981";
            });
        }

        window.openModal = () => document.getElementById('orderModal').style.display = 'flex';
        window.closeModal = () => document.getElementById('orderModal').style.display = 'none';

        function submitOrder() {
            const name = document.getElementById('userName').value;
            if(!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…");
            
            let message = `ğŸ‘‘ *Ø·Ù€Ù„Ù€Ø¨ Ø¬Ù€Ø¯ÙŠÙ€Ø¯ - ÙÙ€Ù„Ø§ÙÙ€Ù„ Ø§Ù„Ù€Ø¨Ù€ÙŠÙ€Ùƒ* ğŸ‘‘\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ“ *Ø§Ù„Ù…ØµØ¯Ø±:* Ø§Ù„ÙƒØ´Ùƒ (Ø§Ù„Ø­ÙˆØ¨Ø§Ù†)\n`;
            message += `ğŸ‘¤ *Ø§Ù„Ø¹Ù…ÙŠÙ„:* ${name}\n`;
            if(gpsUrl) message += `ğŸ“ *Ø§Ù„Ù…ÙˆÙ‚Ø¹:* ${gpsUrl}\n`;
            message += `\nğŸ“‹ *Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª:* \n`;
            
            let total = 0;
            [...foods, ...drinks].forEach(p => {
                if(cart[p.id]) {
                    message += `ğŸ”¹ ${p.name} [ ${cart[p.id]} ]\n`;
                    total += p.price * cart[p.id];
                }
            });
            
            message += `\nğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${document.getElementById('userNotes').value || "Ù„Ø§ ÙŠÙˆØ¬Ø¯"}\n`;
            message += `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:* *${total} Ø±ÙŠØ§Ù„*\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ¨ *Ù†Ø¸Ø§Ù… Ø§Ù„ÙØ§Ø¦Ù‚ Ø§Ù„Ø°ÙƒÙŠ V3*`;

            window.open(`https://wa.me/967733971941?text=${encodeURIComponent(message)}`);
        }

        render();
        checkTime();
    </script>
</body>
</html>
