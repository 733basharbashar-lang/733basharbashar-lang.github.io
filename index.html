<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠÙƒ Ø§Ù„ÙØ§Ø¦Ù‚ | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TEMP123456"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TEMP123456');

      function trackOrder(total, itemsArray) {
        gtag('event', 'purchase', {
          "transaction_id": "T_" + Math.floor(Math.random() * 1000000),
          "value": total,
          "currency": "YER",
          "items": itemsArray
        });
      }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø£Ù†Ù…Ø§Ø· */
        :root { 
            --primary: #2563eb; --bg: #f4f7f6; --card-bg: #FFFFFF; --text: #2d3436; --border: #dfe6e9;
        }

        /* Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© */
        body.theme-blue { --primary: #2563eb; --bg: #f0f4ff; --text: #1e3a8a; }
        body.theme-pink { --primary: #db2777; --bg: #fdf2f8; --text: #831843; }
        body.theme-white { --primary: #475569; --bg: #ffffff; --card-bg: #f8fafc; --text: #0f172a; --border: #e2e8f0; }
        body.theme-cyan { --primary: #0891b2; --bg: #ecfeff; --text: #164e63; }
        body.theme-black { --primary: #fbbf24; --bg: #0f172a; --card-bg: #1e293b; --text: #f8fafc; --border: #334155; }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; color: var(--text); padding-bottom: 120px; overflow-x: hidden; }

        /* Ø²Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        .color-panel-btn {
            position: absolute; top: 20px; left: 20px;
            background: var(--primary); color: white;
            border: none; width: 45px; height: 45px; border-radius: 50%;
            cursor: pointer; font-size: 1.2rem; z-index: 1001;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .color-options {
            position: absolute; top: 75px; left: 20px;
            background: var(--card-bg); padding: 10px; border-radius: 15px;
            display: none; flex-direction: column; gap: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); z-index: 1001; border: 1px solid var(--border);
        }
        .color-options.show { display: flex; }
        .swatch { width: 35px; height: 35px; border-radius: 50%; border: 2px solid white; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        header { 
            background: var(--card-bg); padding: 30px 20px; text-align: center;
            border-bottom: 5px solid var(--primary); box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .logo-area img { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary); }

        .nav-scroller { display: flex; justify-content: center; gap: 15px; padding: 20px; overflow-x: auto; position: sticky; top: 0; background: var(--bg); z-index: 100; }
        .nav-item { padding: 10px 25px; border-radius: 50px; border: 1px solid var(--border); background: var(--card-bg); cursor: pointer; font-weight: bold; white-space: nowrap; color: var(--text); }
        .nav-item.active { background: var(--primary); color: white; border-color: var(--primary); }

        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .menu-item { background: var(--card-bg); border-radius: 20px; overflow: hidden; border: 1px solid var(--border); box-shadow: 0 10px 20px rgba(0,0,0,0.02); display: flex; flex-direction: column; }
        .menu-item img { width: 100%; height: 200px; object-fit: cover; }
        .item-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .price-tag { color: var(--primary); font-weight: 900; font-size: 1.3rem; margin: 10px 0; }

        .controls { display: flex; align-items: center; justify-content: space-between; background: var(--bg); border-radius: 12px; padding: 5px; }
        .btn-qty { width: 40px; height: 40px; border: none; background: var(--primary); color: white; border-radius: 10px; cursor: pointer; font-size: 1.2rem; }
        
        .cart-bar { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 600px; background: var(--card-bg); padding: 15px 25px; border-radius: 25px; border: 2px solid var(--primary); box-shadow: 0 15px 40px rgba(0,0,0,0.2); z-index: 1000; display: flex; justify-content: space-between; align-items: center; }
        .action-btn { background: #10B981; color: white; padding: 12px 25px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; padding: 10px; }
        .modal-box { background: var(--card-bg); padding: 30px; border-radius: 25px; width: 100%; max-width: 450px; color: var(--text); }
        .input-field { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-family: inherit; }
        
        @media (max-width: 600px) { .menu-grid { grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; } .menu-item img { height: 130px; } .price-tag { font-size: 1rem; } }
    </style>
</head>
<body>

    <button class="color-panel-btn" onclick="toggleColorPanel()">ğŸ¨</button>
    <div class="color-options" id="colorPanel">
        <div class="swatch" style="background: #2563eb;" onclick="setTheme('theme-blue')" title="Ø£Ø²Ø±Ù‚"></div>
        <div class="swatch" style="background: #db2777;" onclick="setTheme('theme-pink')" title="ÙˆØ±Ø¯ÙŠ"></div>
        <div class="swatch" style="background: #ffffff; border: 1px solid #ccc;" onclick="setTheme('theme-white')" title="Ø£Ø¨ÙŠØ¶"></div>
        <div class="swatch" style="background: #0891b2;" onclick="setTheme('theme-cyan')" title="Ø³Ù…Ø§ÙˆÙŠ"></div>
        <div class="swatch" style="background: #0f172a;" onclick="setTheme('theme-black')" title="Ø£Ø³ÙˆØ¯"></div>
    </div>

    <header>
        <div class="logo-area"><img src="https://pbs.twimg.com/media/G8PkwQaa4AEfLQk?format=jpg&name=large"></div>
        <h1>ÙÙ„Ø§ÙÙ„ Ø§Ù„Ø¨ÙŠÙƒ ğŸ‘‘</h1>
        <p>Ø§Ù„Ø·Ø¹Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ ÙÙŠ Ù‚Ù„Ø¨ ØªØ¹Ø²</p>
    </header>

    <div class="nav-scroller">
        <div class="nav-item active" onclick="filter('Ø§Ù„ÙƒÙ„', this)">Ø§Ù„ÙƒÙ„</div>
        <div class="nav-item" onclick="filter('Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª', this)">Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª</div>
        <div class="nav-item" onclick="filter('ÙˆØ¬Ø¨Ø§Øª', this)">ÙˆØ¬Ø¨Ø§Øª</div>
        <div class="nav-item" onclick="filter('Ù…Ø´Ø±ÙˆØ¨Ø§Øª', this)">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</div>
    </div>

    <div id="menu-list" class="menu-grid"></div>

    <div class="cart-bar" id="cart-summary">
        <div>
            <div id="grand-total" style="font-weight: 900; font-size: 1.2rem; color: var(--primary);">0 Ø±ÙŠØ§Ù„</div>
        </div>
        <button id="main-btn" class="action-btn" onclick="openCustomerModal()" disabled>Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
    </div>

    <div id="customer-modal" class="modal">
        <div class="modal-box">
            <h2 style="text-align:center">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ğŸ“</h2>
            <input type="text" id="cust-name" class="input-field" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…">
            
            <button type="button" onclick="getLocation()" id="location-btn" style="width:100%; padding:12px; margin:5px 0; border-radius:10px; border:1px solid var(--primary); background:none; cursor:pointer; color:var(--primary); font-weight:bold; font-family: inherit;">
                ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ (GPS)
            </button>
            <div id="location-status" style="font-size:0.85rem; text-align:center; margin-bottom:10px; color: #10B981; font-weight: bold;"></div>

            <textarea id="cust-notes" class="input-field" rows="3" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŸ"></textarea>
            
            <button class="action-btn" style="width:100%; font-size: 1.1rem;" onclick="sendToWhatsapp()">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ğŸš€</button>
            <button onclick="closeModal()" style="width:100%; background:none; border:none; margin-top:10px; cursor:pointer; color: #666;">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <script>
        const menu = [
            { id: 1, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„", price: 100, cat: "Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª", img: "https://pbs.twimg.com/media/G8PkXGja4AIRMH_?format=jpg&name=medium" },
            { id: 2, name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø¨ÙŠØ¶", price: 150, cat: "Ø³Ù†Ø¯ÙˆØªØ´Ø§Øª", img: "https://pbs.twimg.com/media/G8PkiqKa4AIw8Ad?format=jpg&name=medium" },
            { id: 3, name: "ÙˆØ¬Ø¨Ø© Ù…Ø§ÙƒØ³", price: 500, cat: "ÙˆØ¬Ø¨Ø§Øª", img: "https://pbs.twimg.com/media/G8TMcuFa4AMZI9N?format=jpg&name=small" },
            { id: 4, name: "ØµØ­Ù† Ø¨Ø·Ø§Ø·Ø³", price: 400, cat: "ÙˆØ¬Ø¨Ø§Øª", img: "https://pbs.twimg.com/media/G8PksWOboAAYpjH?format=jpg&name=small" },
            { id: 5, name: "Ø³ÙÙ† Ø£Ø¨", price: 200, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", img: "https://pbs.twimg.com/media/G8TLNMCbwAAZqH1?format=jpg&name=medium" },
            { id: 6, name: "Ù‚ÙˆØ© Ø£Ø³Ø¯ Øµ", price: 100, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", img: "https://pbs.twimg.com/media/G8TMTB1a4AQBEr0?format=jpg&name=medium" },
            { id: 7, name: "Ù‚ÙˆØ© Ø£Ø³Ø¯ Ùƒ", price: 200, cat: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª", img: "https://pbs.twimg.com/media/G8S2ocOaYAE___8?format=jpg&name=900x900" }
        ];

        let cart = JSON.parse(localStorage.getItem('bik_cart')) || {};
        let userLocation = "";

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function toggleColorPanel() { document.getElementById('colorPanel').classList.toggle('show'); }
        function setTheme(themeName) {
            document.body.className = '';
            document.body.classList.add(themeName);
            localStorage.setItem('selected-theme', themeName);
            toggleColorPanel();
        }
        const savedTheme = localStorage.getItem('selected-theme');
        if(savedTheme) document.body.classList.add(savedTheme);

        function renderMenu(category = 'all') {
            const list = document.getElementById('menu-list');
            list.innerHTML = '';
            menu.filter(i => category === 'all' || i.cat === category).forEach(item => {
                const qty = cart[item.id] || 0;
                list.innerHTML += `
                    <div class="menu-item">
                        <img src="${item.img}">
                        <div class="item-content">
                            <div><h3>${item.name}</h3><div class="price-tag">${item.price} Ø±ÙŠØ§Ù„</div></div>
                            <div class="controls">
                                <button class="btn-qty" onclick="updateQty(${item.id}, -1)">-</button>
                                <span style="font-weight:bold; font-size:1.2rem;">${qty}</span>
                                <button class="btn-qty" onclick="updateQty(${item.id}, 1)">+</button>
                            </div>
                        </div>
                    </div>`;
            });
            updateTotal();
        }

        window.updateQty = (id, change) => {
            cart[id] = (cart[id] || 0) + change;
            if(cart[id] <= 0) delete cart[id];
            localStorage.setItem('bik_cart', JSON.stringify(cart));
            const activeCat = document.querySelector('.nav-item.active').innerText;
            renderMenu(activeCat === 'Ø§Ù„ÙƒÙ„' ? 'all' : activeCat);
        }

        function updateTotal() {
            let total = 0;
            Object.keys(cart).forEach(id => {
                const item = menu.find(m => m.id == id);
                if(item) total += item.price * cart[id];
            });
            document.getElementById('grand-total').innerText = total + " Ø±ÙŠØ§Ù„";
            document.getElementById('main-btn').disabled = total === 0;
        }

        window.filter = (cat, el) => {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            renderMenu(cat === 'Ø§Ù„ÙƒÙ„' ? 'all' : cat);
        }

        window.getLocation = () => {
            const status = document.getElementById('location-status');
            if (!navigator.geolocation) { status.innerText = "ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…"; return; }
            status.innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹... â³";
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    userLocation = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                    status.innerText = "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
                    document.getElementById('location-btn').style.background = "#10B981";
                    document.getElementById('location-btn').style.color = "white";
                },
                () => { status.innerText = "âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"; }
            );
        }

        window.openCustomerModal = () => document.getElementById('customer-modal').style.display = 'flex';
        window.closeModal = () => document.getElementById('customer-modal').style.display = 'none';

        window.sendToWhatsapp = () => {
            const name = document.getElementById('cust-name').value;
            const notes = document.getElementById('cust-notes').value;
            if(!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…");
            
            let total = 0;
            let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠÙƒ* ğŸ‘‘\n\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\n`;
            if(userLocation) msg += `ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${userLocation}\n`;
            msg += `\n*Ø§Ù„Ø·Ù„Ø¨Ø§Øª:*\n`;
            Object.keys(cart).forEach(id => {
                const item = menu.find(m => m.id == id);
                msg += `â–ªï¸ ${cart[id]}x ${item.name} (${item.price * cart[id]} Ø±ÙŠØ§Ù„)\n`;
                total += item.price * cart[id];
            });
            if(notes) msg += `\nğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes}`;
            msg += `\n\nğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„*`;
            
            trackOrder(total);
            window.open(`https://wa.me/967733971941?text=${encodeURIComponent(msg)}`);
        }

        renderMenu();
    </script>
</body>
</html>
